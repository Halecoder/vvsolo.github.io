<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
  <meta name="description" content="">
  <meta name="author" content="">
  <title>排版助手（在线版）</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <style>
    html,
    body {
      font-size: 12px;
    }
  </style>

</head>

<body>
  <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="#">排版助手（在线版）</a>
  </nav>
  <div class="container-fluid" style="margin:20px 0">
    <div class="row">
      <div class="col-2">

        <div class="container-fluid">
          <div class="alert alert-primary" role="alert">
            <strong>标头设置</strong>
          </div>
          <div class="input-group mb-2">
            <div class="input-group-prepend">
              <div class="input-group-text">作者</div>
            </div>
            <input type="text" class="form-control" id="inputAuthor" placeholder="作者名称">
          </div>
          <div class="input-group mb-2">
            <div class="input-group-prepend">
              <div class="input-group-text">首发</div>
            </div>
            <input type="text" class="form-control" id="inputSite" placeholder="首发站点">
          </div>
          <div class="input-group mb-2">
            <button type="button" class="btn btn-primary" id="SaveConfig">保存设置</button>
          </div>
          <div class="alert alert-primary" role="alert">
            <strong>格式设置</strong>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_0">
              <label class="form-check-label" for="Check_0">HTML字符实体转换</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_1">
              <label class="form-check-label" for="Check_1">Unicode转换</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_2">
              <label class="form-check-label" for="Check_2">转换变体字母</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_3">
              <label class="form-check-label" for="Check_3">转换变体序号</label>
            </div>
          </div>
          <hr />
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_4" checked>
              <label class="form-check-label" for="Check_4">半角所有字母数字</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_5" checked>
              <label class="form-check-label" for="Check_5">全角所有标点符号</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_6" checked>
              <label class="form-check-label" for="Check_6">修正章节标题</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_7" checked>
              <label class="form-check-label" for="Check_7">去除汉字间的空格</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_8" checked>
              <label class="form-check-label" for="Check_8">修正分隔符号</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_9" checked>
              <label class="form-check-label" for="Check_9">修正引号</label>
            </div>
          </div>
          <div class="input-group mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="Check_10" checked>
              <label class="form-check-label" for="Check_10">英文首字大写</label>
            </div>
          </div>
        </div>
      </div>
      <div class="col-10">
        <div class="container-fluid" style="padding-bottom:40px">
          <div class="alert alert-warning" role="alert">
            <span><strong id="AlertMsg" data-doc="">填写作者等相关信息后，“一键排整理”后再点击“排版输出”.</strong></span>
            <div class="float-right"><strong id="CountMsg">0</strong> 字节</div>
          </div>
          <div class="float-left">
            <button type="button" class="btn btn-success" id="onCleanUp">一键整理</button>
            <button type="button" class="btn btn-success" id="onTypeSet">排版输出</button>
            <button type="button" class="btn btn-secondary" id="onCopy">复制到剪贴板</button>
            <button type="button" class="btn btn-secondary" id="toSimp">简体</button>
            <button type="button" class="btn btn-secondary" id="toTrad">繁体</button>
          </div>
          <div class="float-right">
            <button type="button" class="btn btn-primary" id="SaveEditor">保存</button>
            <button type="button" class="btn btn-info" id="RestoreEditor">还原</button>
            <button type="button" class="btn btn-danger" id="ClearEditor">清空</button>
          </div>
        </div>
        <div class="container-fluid">
          <textarea class="form-control" id="TextareaEditor" style="min-height:500px;background-color: #fafafa;font-size: 14px;" placeholder="粘贴文本到此处"></textarea>
        </div>
      </div>
    </div>
  </div>
  <!-- /.container -->

  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <script src="js/core.js"></script>
  <script src="js/typesetting.js"></script>
  <script src="js/language.js"></script>
  <script>
    $(function() {
      // 设置
      $('#inputAuthor').val($.cookie('inputAuthor') || '');
      $('#inputSite').val($.cookie('inputSite') || '');
      $('#SaveConfig').click(function() {
        $.cookie('inputAuthor', $('#inputAuthor').val());
        $.cookie('inputSite', $('#inputSite').val());
        $('#AlertMsg').hide().html('设置已保存！').show(300);
      })
      // 按钮
      var tEditor = $('#TextareaEditor');
      tEditor.focus();
      // 转简体
      $('#toSimp').click(function() {
        tEditor.val(Othered(Simplized(tEditor.val())));
      })
      // 转繁体
      $('#toTrad').click(function() {
        tEditor.val(Traditionalized(tEditor.val()));
      })
      // 实时统计字符
      tEditor.on('keyup keydown change', function() {
        $('#CountMsg').html(tEditor.val().length)
      })
      // 清空文档
      $('#ClearEditor').on('click', function() {
        tEditor.val('').focus();
      });
      // 保存文档
      $('#SaveEditor').on('click', function() {
        var sEditor = tEditor.val();
        if (sEditor.length > 0) {
          $('#AlertMsg').data('doc', sEditor);
          $('#AlertMsg').hide().html('存档已保存！').show(300);
        }
        tEditor.focus();
      });
      // 还原文档
      $('#RestoreEditor').on('click', function() {
        var sEditor = $('#AlertMsg').data('doc');
        if (sEditor.length > 0) {
          tEditor.val(sEditor);
          $('#AlertMsg').hide().html('文档已还原！').show(300);
        } else {
          $('#AlertMsg').hide().html('保存文档为空！').show(300);
        }
        tEditor.focus();
      });
      // 一键整理
      $('#onCleanUp').click(function() {
        var sVal = tEditor.val();
        if (sVal.length > 0) {
          tEditor.val(getCleanUp(sVal));
          tEditor.focus();
        }

      })
      // 一键排版
      $('#onTypeSet').click(function() {
        var sVal = tEditor.val();
        if (sVal.length > 0) {
          $('#AlertMsg').data('doc', sVal);
          $('#AlertMsg').hide().html('存档已保存！').show(300);
          tEditor.val(doTidy(sVal));
          tEditor.focus();
        }
      })
      // 复制到剪贴板
      $('#onCopy').click(function() {
        var sVal = tEditor.val();
        if (sVal.length > 0) {
          tEditor.focus();
          tEditor.select();
          document.execCommand('Copy');
          tEditor.blur();
          $('#AlertMsg').hide().html('文档已复制到剪贴板！').show(300);
        }
      });
    });

  </script>
</body>

</html>