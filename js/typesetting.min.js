Object.extend=function(a,d){for(var b in d)a[b]=d[b];return a};
Object.extend(String.prototype,{replaces:function(a){var d=this,b;for(b in a)d=d.replace(a[b][0],a[b][1]);return d},times:function(a){return 1>a?"":Array(a+1).join(this)},checkEmpty:function(){return 0===this.replace(configs.AllSpace,"").length},len:function(){return this.replace(/[^\x00-\xff]/g,"**").length},realSubstring:function(a,d){var b=this||"";if(0===b.length)return b;a=a||0;d=d||b.len();for(var g=0,h="",f=c=cl=0;f<b.length;f++)if(c=b.charCodeAt(f),cl=255<c?2:1,g+=cl,!(a>=g))if(d==b.len()||
0<=(d-=cl))h+=String.fromCharCode(c);else break;return h},trim:function(a){return this.replace(configs.trim,a||"")},replaceInit:function(){return this.replace(configs.Space," ").trim("\n").replace(/(\r\n|\n\r|\r)/g,"\n").replace(/$/g,"\n").replace(/([a-zA-Z])(['`\uff07\u2018\u2019\u300e\u300f])([a-zA-Z])/g,"$1'$3").replace(/^\u300d/gm,"\u300c").replace(/^\u300f/gm,"\u300e").replace(/^\u201d/gm,"\u201c").replace(/^\u2019/gm,"\u2018").replace(/\u300c$/gm,"\u300d").replace(/\u300e$/gm,"\u300f").replace(/\u201c$/gm,
"\u201d").replace(/\u2018$/gm,"\u2019").replace(/\n{2,}/gm,"\n")},replaceEnd:function(){return this.replace(/^\u300d/gm,"\u300c").replace(/^\u300f/gm,"\u300e").replace(/^\u201d/gm,"\u201c").replace(/^\u2019/gm,"\u2018").replace(/\u300c$/gm,"\u300d").replace(/\u300e$/gm,"\u300f").replace(/\u201c$/gm,"\u201d").replace(/\u2018$/gm,"\u2019").replace(/\n{3,}/gm,"\n\n").replace(/^\n+/g,"")},convertInitial:function(){for(var a=this.toLowerCase().replace(/\b([a-zA-Z])/g,function(a){return a.toUpperCase()}).replace(/[\u300a\u201c\u2018\u300c\u300e\u3010"\uff08]([\w \uff01\uff08\uff09\uff0c\uff1a\uff1b\uff1f\u2013\u2026\u3002\uff06\uff20\uff03!\(\),:;\?\-\.&@#'\n]{2,})[\u300b\u201d\u2019\u300d\u3011\u300f"\uff09]/gm,
function(a,b){return(b.match(/[\u2026\uff01\uff1f\u3002!\?\.]$/g)||b.match(/[\uff0c\uff1a\uff1b\uff06,:;&']/g))&&b.match(/\w/g)?a.replace(/[\uff0c, ][A-Z]/g,function(a){return a.toLowerCase()}).replaces(configs.halfSymbol).replace(/[\.\?!:&][ ]?[a-z]/g,function(a){return a.toUpperCase()}):a}).replace(/^([\w \uff01\uff08\uff09\uff0c\uff1a\uff1b\uff1f\u2013\u2026\u3002\uff06\uff20\uff03!\(\),:;\?\-\.&@#']{2,})$/gm,function(a,b){return a.replace(/[\uff0c ][A-Z]/g,function(a){return a.toLowerCase()})}).replace(/\b([A-Za-z\d]+)\b/g,
function(a){return a.match(/\d/)?a.toUpperCase():a}).replace(/([a-zA-Z]+[\-\u2014~\uff5e]\d|\d[\-\u2014~\uff5e][a-zA-Z]+)/g,function(a){return a.toUpperCase()}).replace(/(\W)(a{2,}|b{2,}|c{2,}|d{2,}|e{2,}|f{2,}|g{2,}|h{2,}|i{2,}|j{2,}|k{2,}|l{2,}|m{2,}|n{2,}|o{2,}|p{2,}|q{2,}|r{2,}|s{2,}|t{2,}|u{2,}|v{2,}|w{2,}|x{2,}|y{2,}|z{2,})(\W)/gi,function(a){return a.toUpperCase()}).replace(/([a-zA-Z]+)['`\uff07\u2018\u2019\u300e\u300f]([a-zA-Z])/g,function(a,b,d){return b.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})+
"'"+d.toLowerCase()}).replace(/([0-9a-zA-Z]+)[\u3002\.]([0-9a-zA-Z\u2014\-_]+)[\u3002\.](com|net|org|gov)/gi,function(a){return a.replace(/\u3002/g,".").toLowerCase()}),d=configs.pWord.split("|"),b=0;b<d.length;b++)a=a.replace(new RegExp("\\b("+d[b]+")([0-9]*)\\b","gi"),d[b]+"$2");return a},convertNumberLetter:function(a){return this.convertLetter(a).convertNumber(a).replaces(configs.nwSymbol)},convertDBCNumber:function(){return this.replace(/[\uFF10-\uFF19]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-
65248)})},convertNumber:function(a){return 1===a?this.replace(/[\u0030-\u0039]/g,function(a){return String.fromCharCode(a.charCodeAt(0)+65248)}).replace(configs.regSBCNumberTitle,function(a){return a.convertDBCNumber()}):this.convertDBCNumber()},convertLetter:function(a){var d=this.replace(/([\uFF41-\uFF5A])([\uFF21-\uFF3A])/g,"$1 $2");return 1===a?d.replace(/[a-zA-Z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)+65248)}):d.replace(/[\uFF41-\uFF5A\uFF21-\uFF3A]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-
65248)})},converUnicode:function(){return this.replace(/\\u?([0-9a-f]{4})/gi,function(a){return unescape(a.replace(/\\u?/gi,"%u"))}).replace(/([\uff06&]#(\d+)[;\uff1b])/gi,function(a){return String.fromCharCode(a.replace(/[\uff06&#;\uff1b]/g,""))})},converHtmlEntity:function(){return this.replace(configs.regHtmlEntity,function(a,d){return configs.sHtmlEntity[d]?configs.sHtmlEntity[d]:a})},convertVariant:function(){return this.replaces(configs.sVariant)},convertSerialNumber:function(){return this.replaces(configs.sSerialNumber)},
convertPunctuation:function(){return this.replaces(configs.punSymbol).replaces(configs.nwSymbol)},replaceSpace:function(){return this.replace(/[\t]+(?=[\u4e00-\u9fa0])/g,"\n").replace(/[ ]+/g," ").replace(/[ ]+(?=[\u4e00-\u9fa0\u00b7\uff01\uff08\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\u2013\u2014\u2018\u2019\u201c\u201d\u2026\u3001\u3002\u3008-\u3011\u3014\u3015\uffe0-\uffe5\uff06\/\\\+\-'])/g,"").replace(/([0-9a-zA-Z])[ ]+([\u4e00-\u9fa0\u00b7\uff01\uff08\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\u2013\u2014\u2018\u2019\u201c\u201d\u2026\u3001\u3002\u3008-\u3011\u3014\u3015\uffe0-\uffe5\uff06])/g,
"$1$2").replace(/([\u4e00-\u9fa0\u00b7\uff01\uff08\uff09\uff0c\uff0e\uff1a\uff1b\uff1f\u2013\u2014\u2018\u2019\u201c\u201d\u2026\u3001\u3002\u3008-\u3011\u3014\u3015\uffe0-\uffe5\uff06])[ ]+([0-9a-zA-Z])/g,"$1$2")},replaceSeparator:function(){return this.replaces(configs.rSeparator).replace(/!@!@!@!@!/g,"\uff0a".times(35)).replace(/@@@@/g,configs.Separator)},replaceQuotes:function(a,d){a=("cn"!==a?"\u2018\u2019\u201c\u201d":"\u300e\u300f\u300c\u300d").split("");d=d||!1;var b=this.replace(/([a-zA-z])(['`\uff07\u2018\u2019\u300e\u300f])([a-zA-z])/g,
"$1\u203b@\u203b$3");d||(b=b.replace(/[\u2018\u2019\u300e\u300f]/g,"'").replace(/[\u201c\u201d\u300c\u300d]/g,'"'));return b.replace(/[`\uff07]/g,"'").replace(/[\u301d\u301e\uff3b\uff3d\uff02\u2033\uff62\uff63]/g,'"').replace(/'([^'\r\n]+)'/g,a[0]+"$1"+a[1]).replace(/^([\u3000]+)'/gm,"$1"+a[0]).replace(/'/g,a[1]).replace(new RegExp("^([\u3000]*)"+a[1],"gm"),"$1"+a[0]).replace(new RegExp(a[0]+"$","gm"),a[1]).replace(/\u203b@\u203b/g,"'").replace(/"([^"\r\n]+)"/g,a[2]+"$1"+a[3]).replace(/^([\u3000]+)"/gm,
"$1"+a[2]).replace(/"/g,a[3]).replace(new RegExp("^([\u3000]*)"+a[3],"gm"),"$1"+a[2]).replace(new RegExp(a[2]+"$","gm"),a[3]).replace(new RegExp("\uff1a"+a[3],"g"),"\uff1a"+a[2])},toTitleCenter:function(a,d,b){a=a||"\n";d=d||"";b=b||!1;var g=2*configs.Linenum,h=this.trim();if(b){var f=h.len(),k=0===f%4?" ":"";b&&g>f&&(h="\u3000".times(parseInt((g-f)/4,10))+k+h)}return a+h+d},replaceTitle:function(a,d,b,g){var h=configs.Divide,f=a||"\n\n",k=d||"",l=b||!1;a=this;g&&(configs.regSeparator=configs.regSeparatorNull,
configs.regStrictEnd=configs.regEnd);var m=configs.regTitle;g=configs.regSeparator;var q=configs.regSeparatorNull,r=new RegExp("^"+g,"g"),u=new RegExp("^"+g+"$","g"),n=configs.regTitleBorder;l&&(a=a.replace(new RegExp(configs.regStart+configs.Separator,"gm"),function(a){return a.toTitleCenter("","",l)}));d=function(a,b){b=b||m.t2;return a.replace(new RegExp([n[0]+"?("+b+")"+n[1]+"?","("+q+")",n[0]+"?"+configs.regEnd+n[1]+"?"].join(""),"gm"),function(a){return a.replace(new RegExp("["+n.join("")+"]",
"g"),"")})};var p=function(a,b){if(0==a.length)return"";b=b?!1:!0;a=a.replace(/[ ]{1,}/g," ").replace(r,"").replace(/([\u4E00-\u9FA5]{2,})[ ]([\u4E00-\u9FA5]{2,})/g,"$1\uff0c$2").replace(/([\u4E00-\u9FA5])[ ]([\u4E00-\u9FA5])/g,"$1$2").replace(/(\w+)[ ]{1,4}(\w+)/g,"$1 $2").replace(u,"");return 0<a.length&&b?h+a:a};b=["^"+configs.regStart,"","(?:"+q+")","("+configs.regEnd+"|$)","$"];b[1]="("+m.t1.join("|")+")";a=d(a,b[1]);a=a.replace(new RegExp(b.join(""),"gm"),function(a,b,d){if(d.match(/^[\uff01\uff1f\u3002]{1,3}$/g))return a;
d=p(d);return(b+d).toTitleCenter(f,k,l)});b[1]=m.t2;a=d(a,b[1]);b[2]="("+q+")";a=a.replace(new RegExp(b.join(""),"gm"),function(a,b,d,e){if(d.match(/^[\-\u2014]{1,4}/g)||e.match(/^[\uff01\uff1f\u3002\u2026]{1,3}$/g)||!d.match(r)&&e.match(/[\uff0c]|[\uff01\uff1f\u3002\u2026]{1,3}$/g)||a.match(configs.regSkipTitle)&&!d.match(r)&&e.match(/[\uff01\uff1f\u3002\u2026]{1,3}$/g))return a;e=p(e);b=b.replace(/(^[\u7b2c]+| )/g,"");return("\u7b2c"+b+e).toTitleCenter(f,k,l)});b[1]=m.t5;b[2]="";a=d(a,b[1]);a=a.replace(new RegExp(b.join(""),
"gm"),function(a,b,d){d=p(d,"no");return(b+d).toTitleCenter(f,k,l)});if(l)return a;b[1]=m.t3;b[2]="(?:"+q+")";a=d(a,b[1]);a=a.replace(new RegExp(b.join(""),"gm"),function(a,b,d,e){e=p(e);return f+"\u7b2c"+d+b+e+k});b[1]=m.t4;b[2]="("+g+"|";b[3]=g+configs.regStrictEnd+"|$)";var t=configs.regSkipTitle1;return a=a.replace(new RegExp(b.join(""),"gm"),function(a,b,d){if(d.match(/^[\uff01\uff1f\u3002\u2026]{1,3}$/g)||!d.match(r)&&d.match(/[\uff01\uff1f\u3002\u2026]$/g))return a;for(var e=0;e<t.length;e++)if(a.match(t[e]))return a;
d=p(d);return f+"\u7b2c"+b+"\u7ae0"+d+k})}});
